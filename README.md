# TikTok Queue Bot

Telegram-бот для управления очередью TikTok-видео с системой лайков, очков и уровней.

## Описание

Этот бот позволяет пользователям добавлять свои TikTok-видео в общую очередь, но только после того, как они подтвердят, что поставили лайки другим видео из очереди. Бот отслеживает активность пользователей, начисляет очки за лайки и публикации, повышает уровни и предоставляет бонусы за активность.

### Основные функции

- `/start` — приветствие и информация о боте
- `/submit [ссылка]` — отправить видео в очередь (доступно только после лайков предыдущих)
- `/like [номер]` — подтвердить, что лайкнул видео из очереди
- `/queue` — показать очередь видео
- `/status` — показать статистику пользователя (лайки, видео, очки, уровень)
- `/leaderboard` — таблица лидеров по очкам

### Дополнительные возможности

- Админ-панель с inline-кнопками для управления ботом
- Система очков и уровней за активность
- Бонусы за серии лайков и повышение уровня
- Защита от спама и блокировка нарушителей
- Интеграция с базой данных SQLite для хранения данных

## Установка и запуск

### Предварительные требования

- Python 3.7 или выше
- pip (менеджер пакетов Python)
- Токен Telegram-бота от [@BotFather](https://t.me/BotFather)

### Локальная установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/tiktok-queue-bot.git
   cd tiktok-queue-bot
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Создайте файл `.env` на основе `.env.example`:
   ```bash
   cp .env.example .env
   ```

4. Отредактируйте файл `.env`, добавив токен бота и ID администраторов:
   ```
   BOT_TOKEN=your_bot_token_here
   ADMIN_IDS=123456789,987654321
   ```

5. Запустите бота:
   ```bash
   python main.py
   ```

### Деплой на Render

1. Создайте новый Web Service на [Render](https://render.com/)

2. Подключите свой GitHub репозиторий

3. Настройте следующие параметры:
   - **Name**: tiktok-queue-bot (или любое другое имя)
   - **Environment**: Python
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `python main.py`

4. Добавьте переменные окружения:
   - `BOT_TOKEN`: ваш токен от BotFather
   - `ADMIN_IDS`: ID администраторов через запятую
   - `USE_WEBHOOK`: True
   - `WEBHOOK_URL`: https://your-app-name.onrender.com
   - `PORT`: 8080

5. Нажмите "Create Web Service"

## Структура проекта

```
tiktok_queue_bot/
├── main.py                # Точка входа приложения
├── requirements.txt       # Зависимости проекта
├── .env.example           # Пример файла с переменными окружения
├── src/
│   ├── bot.py             # Основная логика бота
│   ├── config.py          # Конфигурация и настройки
│   └── database.py        # Работа с базой данных SQLite
```

## Настройка бота

Все основные настройки бота хранятся в базе данных и могут быть изменены через админ-панель:

- **Лайки для публикации**: количество лайков, необходимое для добавления видео
- **Очки за лайк**: сколько очков получает пользователь за один лайк
- **Очки за публикацию**: сколько очков получает пользователь за публикацию видео
- **Порог уровня**: количество очков для повышения уровня
- **Таймаут спама**: минимальный интервал между командами (в секундах)

## Админ-панель

Доступ к админ-панели имеют только пользователи, чьи ID указаны в переменной `ADMIN_IDS`.

Команда `/admin` открывает панель с следующими разделами:

### Пользователи
- Добавление администраторов
- Сброс счетчика лайков
- Добавление очков
- Изменение уровня
- Блокировка пользователей

### Очередь
- Удаление видео
- Очистка очереди
- Отправка объявлений всем пользователям

### Настройки
- Изменение количества лайков для публикации
- Настройка таймаута защиты от спама
- Изменение очков за лайк/публикацию
- Изменение порога уровня

### Статистика
- Общее количество пользователей, видео, лайков
- Активность за последние 24 часа
- Текущие настройки бота

## Система очков и уровней

- Пользователи получают очки за лайки и публикации
- Каждый новый уровень требует больше очков
- При повышении уровня пользователь получает бонусные очки
- За серию лайков (каждые 5 лайков в течение дня) начисляются дополнительные очки
- В статистике пользователя отображается его ранг среди всех участников

## Защита от спама

- Ограничение частоты использования команд
- Проверка корректности ссылок на TikTok
- Возможность блокировки нарушителей через админ-панель
- Логирование подозрительной активности

## Лицензия

MIT

## Автор

Создано по запросу пользователя.
